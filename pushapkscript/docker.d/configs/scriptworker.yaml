provisioner_id: 'scriptworker-prov-v1'
worker_group:
  $if: 'COT_PRODUCT == "mobile"'
  then:
    $if: 'ENV == "prod"'
    then: 'mobile-pushapk-v1'
    else: 'mobile-pushapk-dep-v1'
  else:
    $if: 'ENV == "prod"'
    then: 'pushapk-v1'
    else: 'dep-pushapk'
worker_type:
  $if: 'COT_PRODUCT == "mobile"'
  then:
    $if: 'ENV == "prod"'
    then: 'mobile-pushapk-v1'
    else: 'mobile-pushapk-dep-v1'
  else:
    $if: 'ENV == "prod"'
    then: 'pushapk-v1'
    else: 'dep-pushapk'
worker_id:
  $eval: 'WORKER_ID'  # generated by configloader

credentials:
    clientId:
      $eval: 'TASKCLUSTER_CLIENT_ID'  # set by cloudops
    accessToken:
      $eval: 'TASKCLUSTER_ACCESS_TOKEN'  # set by cloudops

artifact_upload_timeout: 1200
task_max_timeout: 3600
task_script:
  - '/app/bin/pushapkscript'
  - '/app/configs/worker_config.json'
verbose: true

verify_chain_of_trust: true
sign_chain_of_trust:
  $eval: 'ENV == "prod"'
verify_cot_signature:
  $eval: 'ENV == "prod"'
cot_job_type: scriptworker
cot_product:
  $eval: 'COT_PRODUCT'

# Calls to Github API are limited to 60 an hour. Using an API token allows to raise the limit to
# 5000 per hour. https://developer.github.com/v3/#rate-limiting
github_oauth_token: ""

log_dir: /app/logs
work_dir: /app/workdir
artifact_dir: /app/artifacts
task_log_dir: /app/artifacts/public/logs
watch_log_file: true

scriptworker_provisioners:
    - scriptworker-prov-v1

ed25519_private_key_path: /app/configs/ed25519_privkey
